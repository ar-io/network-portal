import{r as s,u as z,a as B,j as e,S as _,b as Y,C as K,c as Q,m as F,d as X,f as O,T as N,e as g,g as Z,H as ee}from"./index-DQHvdTxE.js";import{S as te}from"./gateway-B3zteQzV.js";import{u as se,G as ae,S as k,a as re}from"./useGatewayInfo-Buw5l1xe.js";import{u as P}from"./useAllGateways-YBCzRRSm.js";import{A as oe}from"./AddressCell-B1rVsCfI.js";import{C as le}from"./ColumnSelector-BE6fw_Y1.js";import{S as R,a as ne}from"./ServerSortableTableView-BKj2xuUh.js";import{S as M}from"./caret_double_right-Cfix3Ety.js";import{S as ie}from"./search-B5ZvmDow.js";import{c as de}from"./TableSkeletonRow-zrttk92L.js";(function(){try{var r=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},o=new Error().stack;o&&(r._sentryDebugIds=r._sentryDebugIds||{},r._sentryDebugIds[o]="3d2d1ab2-23da-4f8d-b83c-3fe275fb83f2",r._sentryDebugIdIdentifier="sentry-dbid-3d2d1ab2-23da-4f8d-b83c-3fe275fb83f2")}catch{}})();const ce=r=>s.createElement("svg",{width:28,height:28,viewBox:"0 0 28 28",fill:"none",xmlns:"http://www.w3.org/2000/svg",...r},s.createElement("g",{id:"Frame"},s.createElement("path",{id:"Vector",d:"M7 19.8332L12.8333 13.9998L7 8.1665",stroke:"url(#paint0_linear_1969_8320)",strokeLinecap:"round",strokeLinejoin:"round"}),s.createElement("path",{id:"Vector_2",d:"M15.1665 19.8332L20.9998 13.9998L15.1665 8.1665",stroke:"url(#paint1_linear_1969_8320)",strokeLinecap:"round",strokeLinejoin:"round"})),s.createElement("defs",null,s.createElement("linearGradient",{id:"paint0_linear_1969_8320",x1:7.4615,y1:17.377,x2:12.8935,y2:17.3108,gradientUnits:"userSpaceOnUse"},s.createElement("stop",{stopColor:"#F7C3A1"}),s.createElement("stop",{offset:.52,stopColor:"#EBAEC6"}),s.createElement("stop",{offset:1,stopColor:"#DF9BE8"})),s.createElement("linearGradient",{id:"paint1_linear_1969_8320",x1:15.628,y1:17.377,x2:21.06,y2:17.3108,gradientUnits:"userSpaceOnUse"},s.createElement("stop",{stopColor:"#F7C3A1"}),s.createElement("stop",{offset:.52,stopColor:"#EBAEC6"}),s.createElement("stop",{offset:1,stopColor:"#DF9BE8"})))),me=({label:r,value:o})=>e.jsxs("div",{className:"inline-flex h-[2.375rem] flex-col items-start justify-start gap-1 border-r px-12 text-left dark:border-transparent-100-8",children:[e.jsx("div",{className:"pt-1 text-xs leading-none text-low",children:r}),e.jsx("div",{className:"text-nowrap text-xs text-mid",children:o})]}),xe=()=>{const r=z(),o=B(p=>p.walletAddress),[l,n]=s.useState(!1),[x,u]=s.useState(!1),{gatewayInfo:d,gatewayStatus:j}=se(),{data:c}=P();return e.jsxs("div",{children:[o&&j===ae.FOUND?e.jsx("div",{children:e.jsxs("button",{className:"group relative h-fit w-full overflow-hidden rounded-xl bg-grey-800 lg:h-[7.5rem]",onClick:()=>{o&&r(`/gateways/${o.toString()}`)},children:[e.jsx("div",{className:`invisible size-full rounded-xl bg-gradient-to-r
        from-gradient-primary-start to-gradient-primary-end p-px group-hover:visible`,children:e.jsx("div",{className:"relative size-full overflow-hidden rounded-xl bg-grey-800",children:e.jsx(k,{className:"absolute right-[calc(-.625rem-1px)] top-[calc(-.3125rem-1px)] z-0"})})}),e.jsx(k,{className:"visible absolute right-[-.625rem] top-[-.3125rem] z-0  group-hover:invisible"}),e.jsx(ce,{className:"invisible absolute right-4 top-4 group-hover:visible"}),e.jsxs("div",{className:"top-0 z-10 flex size-full flex-col bg-transparent py-6 align-middle lg:absolute",children:[e.jsxs("div",{className:"flex items-center gap-3 pl-6",children:[e.jsx(te,{className:"block h-3 w-4 group-hover:hidden"}),e.jsx(re,{className:"hidden h-3 w-4 group-hover:block"}),e.jsx("div",{className:"group-hover:text-gradient text-sm text-high",children:"My Gateway"})]}),e.jsx("div",{className:"mt-3 flex flex-col pl-1.5 lg:flex-row",children:d.map(([p,S],h)=>e.jsx(me,{label:p,value:`${S}`},h))})]})]})}):e.jsxs("div",{className:"relative h-auto w-full overflow-hidden rounded-xl bg-grey-800 p-6",children:[e.jsx(k,{className:"absolute right-[-0.5rem] top-[-0.5rem] z-0"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"text-gradient text-lg font-medium",children:"Start Earning Rewards"}),e.jsx(_,{className:"size-3"})]}),e.jsxs("div",{className:"text-xs text-mid mb-4",children:["Join ",c?`${c.length}+`:"500+"," gateways earning ARIO tokens"]}),e.jsxs("div",{className:"text-sm text-low mb-6 space-y-2",children:[e.jsx("div",{children:"1. Set up your gateway (10 mins)"}),e.jsx("div",{children:"2. Buy and configure a DNS name"}),e.jsx("div",{children:"3. Join the network and start earning"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("a",{href:"https://docs.ar.io/build/run-a-gateway",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center gap-2 px-4 py-2 rounded-lg border border-grey-600 bg-grey-700 text-sm text-high hover:bg-grey-600 transition-colors",children:["View Setup Guide",e.jsx(Y,{className:"h-3 w-3"})]}),e.jsxs("button",{onClick:()=>{o?u(!0):n(!0)},className:"inline-flex items-center justify-center gap-2 px-4 py-2 rounded-lg bg-gradient-to-r from-gradient-primary-start to-gradient-primary-end text-sm text-grey-900 font-medium hover:opacity-90 transition-opacity",children:[o?"Join Network":"Connect Wallet to Join",e.jsx(_,{className:"size-3 text-grey-900",style:{filter:"brightness(0)"}})]})]})]})]}),l&&e.jsx(K,{onClose:()=>n(!1)}),x&&e.jsx(Q,{onClose:()=>u(!1)})]})},i=de(),v=25,pe=()=>{var T,L;const r=B(t=>t.ticker),o=z(),[l,n]=s.useState(1),[x,u]=s.useState(""),[d,j]=s.useState(""),[c,p]=s.useState([{id:"totalStake",desc:!0}]);s.useEffect(()=>{const t=setTimeout(()=>{j(x.trim()),n(1)},300);return()=>clearTimeout(t)},[x]);const S={label:"settings.label",domain:"settings.fqdn",owner:"gatewayAddress",start:"startTimestamp",totalStake:"totalStake",status:"status",performance:"stats.passedEpochCount",streak:"stats.passedConsecutiveEpochs"},h=(T=c[0])==null?void 0:T.id,V=(L=c[0])==null?void 0:L.desc,$=h&&S[h]||"totalStake",U=V?"desc":"asc",{isLoading:C,isFetching:H,isError:J,data:y}=P({sortBy:$,sortOrder:U}),[f,E]=s.useState([]);s.useEffect(()=>{if(!y){E([]);return}const t=y.map(a=>{const A=a.stats.passedEpochCount,w=a.stats.totalEpochCount,I=new F(a.totalDelegatedStake).toARIO().valueOf(),G=new F(a.operatorStake).toARIO().valueOf();return{label:a.settings.label,domain:a.settings.fqdn,owner:a.gatewayAddress,start:new Date(a.startTimestamp),totalDelegatedStake:I,operatorStake:G,totalStake:I+G,status:a.status,endTimeStamp:a.endTimestamp,performance:w>0?A/w:-1,passedEpochCount:A,totalEpochCount:w,streak:a.status==="leaving"?Number.NEGATIVE_INFINITY:a.stats.failedConsecutiveEpochs>0?-a.stats.failedConsecutiveEpochs:a.stats.passedConsecutiveEpochs}});E(t)},[y]);const b=s.useMemo(()=>{if(!d)return f;const t=d.toLowerCase();return f.filter(a=>a.domain.toLowerCase().includes(t))},[f,d]),m=Math.ceil(b.length/v),W=s.useMemo(()=>{const t=(l-1)*v,a=t+v;return b.slice(t,a)},[b,l]),q=t=>{p(t),n(1)},D=s.useMemo(()=>[i.accessor("label",{id:"label",header:"Label",sortDescFirst:!1,cell:({row:t})=>t.getValue("label")}),i.accessor("domain",{id:"domain",header:"Domain",sortDescFirst:!1,cell:({row:t})=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("a",{href:`https://${t.getValue("domain")}`,target:"_blank",rel:"noreferrer",onClick:a=>{a.stopPropagation()},className:"text-gradient",children:t.getValue("domain")}),e.jsx(X,{textToCopy:t.getValue("domain")})]})}),i.accessor("owner",{id:"owner",header:"Address",sortDescFirst:!1,cell:({row:t})=>e.jsx(oe,{address:t.getValue("owner")})}),i.accessor("start",{id:"start",header:"Join Date",sortDescFirst:!0,cell:({row:t})=>O(t.original.start)}),i.accessor("totalStake",{id:"totalStake",header:`Total Stake (${r})`,sortDescFirst:!0,cell:({row:t})=>e.jsx(N,{message:e.jsxs("div",{children:[e.jsxs("div",{children:["Operator Stake: ",g(t.original.operatorStake)," ",r]}),e.jsxs("div",{className:"mt-1",children:["Delegated Stake:"," ",g(t.original.totalDelegatedStake)," ",r]})]}),children:g(t.getValue("totalStake"))})}),i.accessor("status",{id:"status",header:"Status",sortDescFirst:!1,cell:({row:t})=>t.original.status==="leaving"?e.jsx(N,{message:e.jsx("div",{children:e.jsxs("div",{children:["Final Withdrawal:"," ",O(new Date(t.original.endTimeStamp))]})}),children:e.jsx("div",{className:"text-red-500",children:"leaving"})}):t.original.status}),i.accessor("performance",{id:"performance",header:"Performance",sortDescFirst:!0,cell:({row:t})=>t.original.performance<0?"N/A":e.jsx(N,{message:e.jsxs("div",{children:[e.jsxs("div",{children:["Passed Epochs: ",t.original.passedEpochCount]}),e.jsxs("div",{children:["Total Epochs: ",t.original.totalEpochCount]})]}),children:`${(t.original.performance*100).toFixed(2)}%`})}),i.accessor("streak",{id:"streak",header:"Streak",sortDescFirst:!0,cell:({row:t})=>e.jsx("div",{className:"pr-6",children:e.jsx(Z,{streak:t.original.streak})})})],[r]);return e.jsxs("div",{children:[e.jsxs("div",{className:"flex w-full items-center overflow-x-auto justify-between rounded-t-xl border border-grey-600 bg-containerL3 py-2 pl-6 pr-[0.8125rem]",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-sm text-mid",children:["Gateways"," ",!C&&`(${g(b.length)}${d?` of ${g(f.length)}`:""})`]}),e.jsxs("div",{className:"relative",children:[e.jsx(ie,{className:"absolute left-3 top-1/2 size-4 -translate-y-1/2 text-low"}),e.jsx("input",{type:"text",placeholder:"Search domain...",value:x,onChange:t=>u(t.target.value),className:"w-[400px] rounded-md border border-grey-700 bg-grey-1000 py-1.5 pl-9 pr-3 text-sm text-mid outline-none placeholder:text-grey-400 focus:text-high"})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[m>1&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>n(1),disabled:l===1,className:"rounded-md bg-containerL2 p-1 text-mid transition-all hover:bg-containerL1 disabled:opacity-50","aria-label":"First page",children:e.jsx(M,{className:"h-4 w-4 rotate-180"})}),e.jsx("button",{onClick:()=>n(Math.max(1,l-1)),disabled:l===1,className:"rounded-md bg-containerL2 p-1 text-mid transition-all hover:bg-containerL1 disabled:opacity-50","aria-label":"Previous page",children:e.jsx(R,{className:"h-4 w-4 rotate-180"})}),e.jsxs("span",{className:"text-xs text-mid",children:["Page ",l," of ",m]}),e.jsx("button",{onClick:()=>n(Math.min(m,l+1)),disabled:l===m,className:"rounded-md bg-containerL2 p-1 text-mid transition-all hover:bg-containerL1 disabled:opacity-50","aria-label":"Next page",children:e.jsx(R,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>n(m),disabled:l===m,className:"rounded-md bg-containerL2 p-1 text-mid transition-all hover:bg-containerL1 disabled:opacity-50","aria-label":"Last page",children:e.jsx(M,{className:"h-4 w-4"})})]}),e.jsx(le,{tableId:"gateways",columns:D})]})]}),e.jsx(ne,{columns:D,data:W,defaultSortingState:{id:"totalStake",desc:!0},currentSorting:c,onSortingChange:q,isLoading:C,isFetching:H,isError:J,noDataFoundText:"No gateways found.",errorText:"Unable to load gateways.",loadingRows:v,onRowClick:t=>{o(`/gateways/${t.owner}`)},tableId:"gateways"})]})},Ne=()=>e.jsxs("div",{className:"px-4 lg:px-6 flex h-full max-w-full flex-col",children:[e.jsx("div",{className:"mb-4 shrink-0",children:e.jsx(ee,{})}),e.jsx("div",{className:"flex-1 overflow-scroll scrollbar scrollbar-thin",children:e.jsxs("div",{className:"mb-6 flex flex-col gap-6 pt-0",children:[e.jsx(xe,{}),e.jsx(pe,{})]})})]});export{Ne as default};
//# sourceMappingURL=index-De-O9-Ld.js.map
