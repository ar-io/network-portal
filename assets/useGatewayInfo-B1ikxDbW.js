import{r as e,w as F,a as p,R as S,j as s,B as V,q as D,s as I,x as T,y as P,o as v,W as j,M as B,D as U,ah as G,v as Z,d as W}from"./index-DT_KQEYq.js";import{u as $,R as x,F as H,i as b}from"./formData-C8nk42AS.js";import{b as _,c as q,d as K,e as Q,v as L,f as Y}from"./validation-DxHxJWOA.js";import{u as J}from"./index-tbIpH_Tt.js";(function(){try{var t=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},d=new Error().stack;d&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[d]="dbef738b-866e-4198-0f7c-13c7994c8d42",t._sentryDebugIdIdentifier="sentry-dbid-dbef738b-866e-4198-0f7c-13c7994c8d42")}catch{}})();const ne=t=>e.createElement("svg",{width:16,height:12,viewBox:"0 0 16 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},e.createElement("g",{id:"Group"},e.createElement("path",{id:"Vector",d:"M1.77797 11.3339H3.55594C4.53383 11.3339 5.33391 10.5338 5.33391 9.55594V7.77797C5.33391 6.80009 4.53383 6 3.55594 6H1.77797C0.800087 6 0 6.80009 0 7.77797V9.55594C0 10.5338 0.800087 11.3339 1.77797 11.3339Z",fill:"url(#paint0_linear_1969_8278)"}),e.createElement("path",{id:"Vector_2",d:"M7.11196 5.99993H8.88993C9.86781 5.99993 10.6679 5.19984 10.6679 4.22196V2.44399C10.6679 1.4661 9.86781 0.666016 8.88993 0.666016H7.11196C6.13407 0.666016 5.33398 1.4661 5.33398 2.44399V4.22196C5.33398 5.19984 6.13407 5.99993 7.11196 5.99993Z",fill:"url(#paint1_linear_1969_8278)"}),e.createElement("path",{id:"Vector_3",d:"M14.2239 11.3339H12.4459C11.4681 11.3339 10.668 10.5338 10.668 9.55594V7.77797C10.668 6.80009 11.4681 6 12.4459 6H14.2239C15.2018 6 16.0019 6.80009 16.0019 7.77797V9.55594C16.0019 10.5338 15.2018 11.3339 14.2239 11.3339Z",fill:"url(#paint2_linear_1969_8278)"}),e.createElement("path",{id:"Vector_4",d:"M3.55273 6.0016C4.53062 6.0016 5.33071 5.20152 5.33071 4.22363C5.33071 5.20152 6.13079 6.0016 7.10868 6.0016C6.13079 6.0016 5.33071 6.80169 5.33071 7.77957C5.33071 6.80169 4.53062 6.0016 3.55273 6.0016Z",fill:"url(#paint3_linear_1969_8278)"}),e.createElement("path",{id:"Vector_5",d:"M8.8916 6.0016C9.86949 6.0016 10.6696 5.20152 10.6696 4.22363C10.6696 5.20152 11.4697 6.0016 12.4475 6.0016C11.4697 6.0016 10.6696 6.80169 10.6696 7.77957C10.6696 6.80169 9.86949 6.0016 8.8916 6.0016Z",fill:"url(#paint4_linear_1969_8278)"})),e.createElement("defs",null,e.createElement("linearGradient",{id:"paint0_linear_1969_8278",x1:.421987,y1:10.211,x2:5.38672,y2:10.0899,gradientUnits:"userSpaceOnUse"},e.createElement("stop",{stopColor:"#F7C3A1"}),e.createElement("stop",{offset:.52,stopColor:"#EBAEC6"}),e.createElement("stop",{offset:1,stopColor:"#DF9BE8"})),e.createElement("linearGradient",{id:"paint1_linear_1969_8278",x1:5.75597,y1:4.877,x2:10.7207,y2:4.75591,gradientUnits:"userSpaceOnUse"},e.createElement("stop",{stopColor:"#F7C3A1"}),e.createElement("stop",{offset:.52,stopColor:"#EBAEC6"}),e.createElement("stop",{offset:1,stopColor:"#DF9BE8"})),e.createElement("linearGradient",{id:"paint2_linear_1969_8278",x1:11.09,y1:10.211,x2:16.0547,y2:10.0899,gradientUnits:"userSpaceOnUse"},e.createElement("stop",{stopColor:"#F7C3A1"}),e.createElement("stop",{offset:.52,stopColor:"#EBAEC6"}),e.createElement("stop",{offset:1,stopColor:"#DF9BE8"})),e.createElement("linearGradient",{id:"paint3_linear_1969_8278",x1:3.83406,y1:7.03096,x2:7.14388,y2:6.95023,gradientUnits:"userSpaceOnUse"},e.createElement("stop",{stopColor:"#F7C3A1"}),e.createElement("stop",{offset:.52,stopColor:"#EBAEC6"}),e.createElement("stop",{offset:1,stopColor:"#DF9BE8"})),e.createElement("linearGradient",{id:"paint4_linear_1969_8278",x1:9.17293,y1:7.03096,x2:12.4827,y2:6.95023,gradientUnits:"userSpaceOnUse"},e.createElement("stop",{stopColor:"#F7C3A1"}),e.createElement("stop",{offset:.52,stopColor:"#EBAEC6"}),e.createElement("stop",{offset:1,stopColor:"#DF9BE8"})))),ie=t=>e.createElement("svg",{width:153,height:117,viewBox:"0 0 153 117",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},e.createElement("g",{id:"Frame 47535"},e.createElement("g",{id:"Vector"},e.createElement("path",{d:"M80 36L116.5 57V99L80 78L80 36Z",fill:"#0C0C0D"}),e.createElement("path",{d:"M116.22 57L152.72 36V78L116.22 99V57Z",fill:"#131314"}),e.createElement("path",{d:"M116.5 15L153 36L116.5 57L80 36L116.5 15Z",fill:"#1D1D1F"})),e.createElement("g",{id:"Vector_2"},e.createElement("path",{d:"M49 72L75 87V117L49 102L49 72Z",fill:"#0C0C0D"}),e.createElement("path",{d:"M74.8003 87L100.8 72V102L74.8003 117V87Z",fill:"#131314"}),e.createElement("path",{d:"M75 57L101 72L75 87L49 72L75 57Z",fill:"#1D1D1F"})),e.createElement("g",{id:"Vector_3"},e.createElement("path",{d:"M125 90L139 98V114L125 106L125 90Z",fill:"#0C0C0D"}),e.createElement("path",{d:"M138.892 98L152.892 90V106L138.892 114V98Z",fill:"#131314"}),e.createElement("path",{d:"M139 82L153 90L139 98L125 90L139 82Z",fill:"#1D1D1F"})),e.createElement("g",{id:"Vector_4"},e.createElement("path",{d:"M1.25921e-06 -2.75L49.4999 25.5V82L0 53.75L1.25921e-06 -2.75Z",fill:"#0C0C0D"}),e.createElement("path",{d:"M49.1198 25.5L98.6197 -2.75V53.75L49.1198 82V25.5Z",fill:"#131314"}),e.createElement("path",{d:"M49.5001 -31L99 -2.75L49.4999 25.5L1.25921e-06 -2.75L49.5001 -31Z",fill:"#1D1D1F"})))),f={label:"",address:"",observerAddress:"",propertiesId:"FH1aVetOoulPGqgYukj0VE0wIhDy90WiQoV3U2PeY44",stake:"",allowDelegatedStaking:!1,delegatedStaking:"",delegatedStakingShareRatio:"",note:""},z="https",X=443,ee=0,te=500,de=({onClose:t})=>{const d=F(),a=p(l=>l.walletAddress),o=p(l=>l.arIOWriteableSDK),n=p(l=>l.ticker),{data:i}=$(),[r,g]=e.useState(f),[k,h]=e.useState({}),[M,u]=e.useState(!1),[O,y]=e.useState(!1);e.useEffect(()=>{g(l=>({...l,observerAddress:(a==null?void 0:a.toString())??""}))},[a]);const m=r.allowDelegatedStaking,E=e.useMemo(()=>{const l=i?new S(i.operators.minStake).toARIO().valueOf():1e4;return[{formPropertyName:"label",label:"*Label:",rowType:x.TOP,validateProperty:_("Label",1,64)},{formPropertyName:"address",label:"*Address:",leftComponent:s.jsx("div",{className:"pl-6 text-xs text-low",children:"https://"}),rightComponent:s.jsx("div",{className:"hidden pr-6 text-xs text-low lg:block",children:":443"}),validateProperty:q("Address")},{formPropertyName:"observerAddress",label:"*Observer Wallet:",validateProperty:K("Observer Wallet")},{formPropertyName:"propertiesId",label:"*Properties ID:",placeholder:f.propertiesId,validateProperty:Q("Properties ID")},{formPropertyName:"stake",label:`*Stake (${n}):`,placeholder:`Minimum ${l} ${n}`,validateProperty:L("Stake",n,l)},{formPropertyName:"allowDelegatedStaking",label:"Delegated Staking:"},{formPropertyName:"minDelegatedStake",label:`Minimum Delegated Stake (${n}):`,enabled:m,placeholder:m?`Minimum 10 ${n}`:"Enable Delegated Staking to set this value.",validateProperty:L("Minimum Delegated Stake",n,i?new S(i.delegates.minStake).toARIO().valueOf():10)},{formPropertyName:"delegatedStakingShareRatio",label:"Reward Share Ratio:",enabled:m,placeholder:m?"Enter value 0-95":"Enable Delegated Staking to set this value.",validateProperty:Y("Reward Share Ratio",0,(i==null?void 0:i.operators.maxDelegateRewardSharePct)??95)},{formPropertyName:"note",label:"*Note:",rowType:x.BOTTOM,validateProperty:_("Note",1,256)}]},[m,i,n]),A=async()=>{if(b({formRowDefs:E,formValues:r})&&o)try{const c=r.allowDelegatedStaking;u(!0);const N={protocol:z,fqdn:String(r.address),port:X,note:String(r.note),label:String(r.label),properties:String(r.propertiesId),observerAddress:String(r.observerAddress),allowDelegatedStaking:c,delegateRewardShareRatio:c?parseFloat(String(r.delegatedStakingShareRatio)):ee,minDelegatedStake:new v(c?parseFloat(String(r.minDelegatedStake)):te).toMARIO().valueOf(),autoStake:!0,operatorStake:new v(parseFloat(String(r.stake))).toMARIO().valueOf()},{id:R}=await o.joinNetwork(N,j);B.info(`Join Network txID: ${R}`),d.invalidateQueries({queryKey:["gateway",a==null?void 0:a.toString()],refetchType:"all"}),d.invalidateQueries({queryKey:["gateways"],refetchType:"all"}),y(!0)}catch(c){U(`${c}`)}finally{u(!1)}},C=()=>{g({...f,observerAddress:(a==null?void 0:a.toString())??""}),h({})},w=()=>{C(),t()};return s.jsx(V,{onClose:w,children:s.jsxs("div",{className:"w-[calc(100vw-2rem)] text-left lg:w-[42.5rem]",children:[s.jsx("div",{className:"pb-3 text-2xl text-high",children:"Start Gateway"}),s.jsxs("div",{className:"flex flex-col gap-2 text-sm text-low lg:flex-row",children:["Owner ID:Â ",s.jsx("span",{className:"text-link",children:a==null?void 0:a.toString()})]}),s.jsx("div",{className:"mt-8 grid grid-cols-[14.375rem_auto] overflow-hidden rounded-md outline outline-grey-500",children:E.map((l,c)=>s.jsx(H,{formState:r,setFormState:g,errorMessages:k,setErrorMessages:h,showModified:!1,initialState:l.formPropertyName==="propertiesId"||l.formPropertyName==="observerAddress"?{...f,observerAddress:(a==null?void 0:a.toString())??""}:void 0,...l},c))}),s.jsxs("div",{className:"mt-8 flex w-full grow justify-end gap-[.6875rem]",children:[s.jsx(D,{className:"w-[6.25rem]",onClick:w,active:!0,title:"Cancel",text:"Cancel"}),s.jsx("div",{className:b({formRowDefs:E,formValues:r})?void 0:"pointer-events-none opacity-30",children:s.jsx(D,{className:"w-[6.25rem]",onClick:()=>{A()},title:"Confirm",text:"Confirm",buttonType:I.PRIMARY})})]}),M&&s.jsx(T,{onClose:()=>u(!1),message:"Sign the following data with your wallet to proceed."}),O&&s.jsx(P,{onClose:()=>{C(),y(!1),t()},title:"Congratulations",bodyText:"You have successfully joined the network."})]})})};var ae=(t=>(t[t.LOADING=0]="LOADING",t[t.FOUND=1]="FOUND",t[t.NOT_FOUND=2]="NOT_FOUND",t))(ae||{});const ce=()=>{const t=p(r=>r.walletAddress),d=p(r=>r.ticker),{isLoading:a,data:o}=J({ownerWalletAddress:t==null?void 0:t.toString()});let n;return o?n=[["Label",o.settings.label],["Address",`${o.settings.protocol}://${o.settings.fqdn}:${o.settings.port}`],["Observer Wallet",G(o.observerAddress)],["Joined at",Z(new Date(o.startTimestamp))],[`Stake (${d})`,W(new S(o.operatorStake).toARIO().valueOf())],["Status",o.status],["Reward Ratio",o.settings.delegateRewardShareRatio]]:n=[],{gatewayInfo:n,gateway:o,gatewayStatus:o?1:a?0:2}};export{ae as G,ie as S,ne as a,de as b,ce as u};
//# sourceMappingURL=useGatewayInfo-B1ikxDbW.js.map
