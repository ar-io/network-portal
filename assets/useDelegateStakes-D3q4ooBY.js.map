{"version":3,"file":"useDelegateStakes-D3q4ooBY.js","sources":["../../src/hooks/useDelegateStakes.ts"],"sourcesContent":["import { AoStakeDelegation, AoVaultDelegation } from '@ar.io/sdk/web';\nimport { useGlobalState } from '@src/store';\nimport { useQuery } from '@tanstack/react-query';\n\ntype DelegateStakes = {\n  stakes: Array<AoStakeDelegation>;\n  withdrawals: Array<AoVaultDelegation>;\n};\n\nconst useDelegateStakes = (address?: string) => {\n  const arIOReadSDK = useGlobalState((state) => state.arIOReadSDK);\n\n  const res = useQuery<DelegateStakes>({\n    queryKey: ['delegateStakes', arIOReadSDK, address],\n    queryFn: async () => {\n      if (!address) {\n        throw new Error('Address is not set');\n      }\n\n      const retVal: DelegateStakes = {\n        stakes: [],\n        withdrawals: [],\n      };\n\n      let cursor: string | undefined;\n\n      do {\n        const pageResult = await arIOReadSDK.getDelegations({\n          address,\n          cursor,\n          limit: 100,\n        });\n\n        pageResult.items.forEach((d) => {\n          if (d.type === 'stake') {\n            retVal.stakes.push(d);\n          } else {\n            retVal.withdrawals.push(d);\n          }\n        });\n        cursor = pageResult.nextCursor;\n      } while (cursor !== undefined);\n\n      return retVal;\n    },\n    staleTime: Infinity,\n    enabled: !!address && !!arIOReadSDK,\n  });\n\n  return res;\n};\n\nexport default useDelegateStakes;\n"],"names":["useDelegateStakes","address","arIOReadSDK","useGlobalState","state","useQuery","retVal","cursor","pageResult","d"],"mappings":"sWASA,MAAAA,EAAAC,GAAA,CACA,MAAAC,EAAAC,EAAAC,GAAAA,EAAA,WAAA,EAuCA,OArCAC,EAAA,CAAA,SAAA,CAAA,iBAAAH,EAAAD,CAAA,EACA,QAAA,SAAA,CAEA,GAAA,CAAAA,EACA,MAAA,IAAA,MAAA,oBAAA,EAGA,MAAAK,EAAA,CAAA,OAAA,CAAA,EACA,YAAA,CAAA,CACA,EAGA,IAAAC,EAEA,EAAA,CACA,MAAAC,EAAA,MAAAN,EAAA,eAAA,CAAA,QAAAD,EACA,OAAAM,EACA,MAAA,GACA,CAAA,EAGAC,EAAA,MAAA,QAAAC,GAAA,CACAA,EAAA,OAAA,QACAH,EAAA,OAAA,KAAAG,CAAA,EAEAH,EAAA,YAAA,KAAAG,CAAA,CACA,CAAA,EAEAF,EAAAC,EAAA,UAAA,OAAAD,IAAA,QAGA,OAAAD,CAAA,EACA,UAAA,IACA,QAAA,CAAA,CAAAL,GAAA,CAAA,CAAAC,CACA,CAAA,CAIA"}