import{r as u,j as e,i as w,L as p,P as n,k as g,q as y,v as N}from"./index-DT_KQEYq.js";import{T as R,c as A,u as I}from"./index-tbIpH_Tt.js";import{D as O,d as k,F as D,u as H}from"./FileSaver.min-o_7K3sDm.js";import{A as f}from"./AddressCell-D_f8F7jC.js";import{B as b,A as S}from"./AssessmentDetailsPanel-Ba37u3cp.js";import{C as W}from"./ColumnSelector-BmbWJT6C.js";import{C as h}from"./chevron-right-Dn4_GTmY.js";import{N as C}from"./notebook-text-ru6OBw6G.js";(function(){try{var r=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},s=new Error().stack;s&&(r._sentryDebugIds=r._sentryDebugIds||{},r._sentryDebugIds[s]="9b5a98ca-17b4-4b07-e0d2-8f249a84cf0a",r._sentryDebugIdIdentifier="sentry-dbid-9b5a98ca-17b4-4b07-e0d2-8f249a84cf0a")}catch{}})();const x=A(),F=({gateway:r,reportData:s})=>{const[a,o]=u.useState([]),[l,d]=u.useState(),[m,v]=u.useState();u.useEffect(()=>{const t=Object.entries(s.gatewayAssessments).map(([i,c])=>({observedHost:i,expectedOwner:c.ownershipAssessment.expectedWallets.join(),observedOwner:c.ownershipAssessment.observedWallet,ownershipResult:c.ownershipAssessment.pass,arnsResult:c.arnsAssessments.pass,overallResult:c.pass,assessment:c}));o(t)},[s]);const j=[x.accessor("observedHost",{id:"observedHost",header:"Observed Host",sortDescFirst:!1}),x.accessor("expectedOwner",{id:"expectedOwner",header:"Expected Owner",sortDescFirst:!1,cell:({row:t})=>{const i=t.original.expectedOwner;return i?e.jsx(f,{address:i}):""}}),x.accessor("observedOwner",{id:"observedOwner",header:"Observed Owner",sortDescFirst:!1,cell:({row:t})=>{const i=t.original.observedOwner;return i?e.jsx(f,{address:i}):""}}),x.accessor("ownershipResult",{id:"ownershipResult",header:"Ownership Result",sortDescFirst:!1,cell:({row:t})=>e.jsx(b,{value:t.original.ownershipResult})}),x.accessor("arnsResult",{id:"arnsResult",header:"ArNS Result",sortDescFirst:!1,cell:({row:t})=>e.jsx(b,{value:t.original.arnsResult})}),x.accessor("overallResult",{id:"overallResult",header:"Overall Result",sortDescFirst:!1,cell:({row:t})=>e.jsx("div",{className:"pr-6",children:e.jsx(b,{value:t.original.overallResult})})})];return e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex w-full items-center rounded-t-xl border border-grey-600 bg-containerL3 py-[0.9375rem] pl-6 pr-[0.8125rem]",children:[e.jsx("div",{className:"grow text-sm text-mid",children:"Reports"}),e.jsx(W,{tableId:"gateway-assessments",columns:j})]}),e.jsx(R,{columns:j,data:a||[],isLoading:!1,noDataFoundText:"No reports found.",defaultSortingState:{id:"observedHost",desc:!1},onRowClick:t=>{d(t.observedHost),v(t.assessment)},tableId:"gateway-assessments"}),m&&r&&e.jsx(S,{observedHost:l,assessment:m,onClose:()=>v(void 0)})]})},T=({gateway:r,reportData:s})=>{const a=w(),o=a==null?void 0:a.ownerId,l=a==null?void 0:a.reportId;return e.jsxs("header",{className:"flex-col text-clip rounded-xl leading-[1.4] lg:mt-6 lg:border dark:border-transparent-100-8 dark:bg-grey-1000 dark:text-grey-300",children:[e.jsxs("div",{className:"flex items-center gap-3 py-5 pl-6 pr-4 text-sm",children:[e.jsxs("div",{className:"hidden items-center gap-3 lg:flex",children:[e.jsx("div",{className:"text-mid",children:e.jsx(p,{to:"/gateways",children:"Gateways"})}),e.jsx(h,{className:"size-4 text-mid",strokeWidth:1.5}),r?e.jsx(p,{className:"text-mid",to:`/gateways/${o}`,children:r.settings.label}):e.jsx(n,{}),e.jsx(h,{className:"size-4 text-mid",strokeWidth:1.5}),e.jsx(p,{className:"text-mid",to:`/gateways/${o}/reports`,children:"Reports"}),e.jsx(h,{className:"size-4 text-mid",strokeWidth:1.5}),l?e.jsx("div",{children:l}):e.jsx(n,{})]}),e.jsx("div",{className:"grow"}),e.jsx("div",{className:"items-center",children:e.jsx(g,{})})]}),e.jsxs("div",{className:"relative flex items-center gap-3 rounded-t-xl border border-grey-500 bg-grey-900 px-6 py-4 lg:rounded-t-none",children:[e.jsx(C,{className:"size-4 shrink-0 text-mid",strokeWidth:1.5}),l?e.jsx("div",{className:"break-all text-high",children:l}):e.jsx(n,{}),e.jsx("div",{className:"grow"}),s&&l&&e.jsx(y,{title:"Download Report",icon:e.jsx(O,{className:"size-4",strokeWidth:2}),active:!0,onClick:async()=>{if(l&&s){const d=await k(l),m=new Blob([d],{type:"application/json"});D.saveAs(m,`report-${l}.json`)}}})]}),e.jsxs("div",{className:"grid grid-cols-[120px_auto] items-center gap-3 rounded-b-xl border border-grey-500 bg-grey-900 py-5 pl-6 text-sm lg:grid-cols-[180px_auto]",children:[e.jsx("div",{children:"Reports Source:"}),s?e.jsx("div",{children:"Arweave Tx"}):e.jsx(n,{}),e.jsx("div",{children:"Observer Address:"}),s?e.jsx("div",{children:s.observerAddress}):e.jsx(n,{}),e.jsx("div",{children:"Epoch Number:"}),s?e.jsx("div",{children:s.epochIndex}):e.jsx(n,{}),e.jsx("div",{children:"Generated At:"}),s?e.jsx("div",{children:N(new Date(s.epochStartTimestamp))}):e.jsx(n,{})]})]})},q=()=>{const r=w(),s=r==null?void 0:r.ownerId,a=r==null?void 0:r.reportId,{data:o}=I({ownerWalletAddress:s}),{isLoading:l,data:d}=H(a);return e.jsxs("div",{className:"flex h-full max-w-full flex-col gap-6",children:[e.jsx(T,{gateway:o,reportData:d}),e.jsx("div",{className:"flex-1 overflow-hidden",children:l||!d?void 0:d?e.jsx("div",{className:"h-full overflow-y-auto scrollbar",children:e.jsx(F,{gateway:o,reportData:d})}):e.jsxs("div",{children:["Unable to find report with ID ",a,"."]})})]})};export{q as default};
//# sourceMappingURL=index-B8YyJEAo.js.map
