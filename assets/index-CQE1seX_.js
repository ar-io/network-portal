import{r as s,u as w,a as S,j as e,C as y,b as k,R as h,c as C,f as b,T as g,d as v,S as E,H as D}from"./index-DT_KQEYq.js";import{A as _}from"./AddressCell-D_f8F7jC.js";import{T as F,c as G}from"./index-tbIpH_Tt.js";import{S as I}from"./formData-C8nk42AS.js";import{u as O,G as N,S as x,a as T,b as A}from"./useGatewayInfo-B1ikxDbW.js";import{S as z}from"./pink_arrow-dCGIyjz2.js";import{C as L}from"./ColumnSelector-BmbWJT6C.js";import"./validation-DxHxJWOA.js";(function(){try{var r=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},l=new Error().stack;l&&(r._sentryDebugIds=r._sentryDebugIds||{},r._sentryDebugIds[l]="c7a7c1d2-06cd-4823-d218-7a50db284574",r._sentryDebugIdIdentifier="sentry-dbid-c7a7c1d2-06cd-4823-d218-7a50db284574")}catch{}})();const B=r=>s.createElement("svg",{width:28,height:28,viewBox:"0 0 28 28",fill:"none",xmlns:"http://www.w3.org/2000/svg",...r},s.createElement("g",{id:"Frame"},s.createElement("path",{id:"Vector",d:"M7 19.8332L12.8333 13.9998L7 8.1665",stroke:"url(#paint0_linear_1969_8320)",strokeLinecap:"round",strokeLinejoin:"round"}),s.createElement("path",{id:"Vector_2",d:"M15.1665 19.8332L20.9998 13.9998L15.1665 8.1665",stroke:"url(#paint1_linear_1969_8320)",strokeLinecap:"round",strokeLinejoin:"round"})),s.createElement("defs",null,s.createElement("linearGradient",{id:"paint0_linear_1969_8320",x1:7.4615,y1:17.377,x2:12.8935,y2:17.3108,gradientUnits:"userSpaceOnUse"},s.createElement("stop",{stopColor:"#F7C3A1"}),s.createElement("stop",{offset:.52,stopColor:"#EBAEC6"}),s.createElement("stop",{offset:1,stopColor:"#DF9BE8"})),s.createElement("linearGradient",{id:"paint1_linear_1969_8320",x1:15.628,y1:17.377,x2:21.06,y2:17.3108,gradientUnits:"userSpaceOnUse"},s.createElement("stop",{stopColor:"#F7C3A1"}),s.createElement("stop",{offset:.52,stopColor:"#EBAEC6"}),s.createElement("stop",{offset:1,stopColor:"#DF9BE8"})))),V=({label:r,value:l})=>e.jsxs("div",{className:"inline-flex h-[2.375rem] flex-col items-start justify-start gap-1 border-r px-12 text-left dark:border-transparent-100-8",children:[e.jsx("div",{className:"pt-1 text-xs leading-none text-low",children:r}),e.jsx("div",{className:"text-nowrap text-xs text-mid",children:l})]}),R=()=>{const r=w(),l=S(i=>i.walletAddress),[n,d]=s.useState(!1),[p,c]=s.useState(!1),{gatewayInfo:m,gatewayStatus:t}=O();return e.jsxs("div",{children:[!l||t==N.NOT_FOUND?e.jsx("div",{children:e.jsxs("button",{className:"group relative h-[7.5rem] w-full overflow-hidden rounded-xl bg-grey-800",onClick:()=>{l?c(!0):d(!0)},children:[e.jsx("div",{className:`invisible size-full rounded-xl
       bg-gradient-to-r from-gradient-primary-start to-gradient-primary-end p-px group-hover:visible`,children:e.jsx("div",{className:"size-full overflow-hidden rounded-xl bg-grey-800",children:e.jsx(x,{className:"relative -top-px left-[calc(4rem-1px)] z-0"})})}),e.jsx(x,{className:"visible absolute left-16 top-0 z-0 group-hover:invisible"}),e.jsxs("div",{className:"absolute top-0 z-10 flex size-full flex-col items-center justify-center bg-transparent py-6 align-middle",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"text-gradient",children:"Start your own gateway"})," ",e.jsx(z,{className:"size-3"})]}),e.jsx("div",{className:"px-6 pt-2 text-sm text-low",children:"By running a gateway, you become a contributor to the ecosystem and can earn rewards."})]})]})}):t==N.FOUND?e.jsx("div",{children:e.jsxs("button",{className:"group relative h-fit w-full overflow-hidden rounded-xl bg-grey-800 lg:h-[7.5rem]",onClick:()=>{l&&r(`/gateways/${l.toString()}`)},children:[e.jsx("div",{className:`invisible size-full rounded-xl bg-gradient-to-r
        from-gradient-primary-start to-gradient-primary-end p-px group-hover:visible`,children:e.jsx("div",{className:"relative size-full overflow-hidden rounded-xl bg-grey-800",children:e.jsx(x,{className:"absolute right-[calc(-.625rem-1px)] top-[calc(-.3125rem-1px)] z-0"})})}),e.jsx(x,{className:"visible absolute right-[-.625rem] top-[-.3125rem] z-0  group-hover:invisible"}),e.jsx(B,{className:"invisible absolute right-4 top-4 group-hover:visible"}),e.jsxs("div",{className:"top-0 z-10 flex size-full flex-col bg-transparent py-6 align-middle lg:absolute",children:[e.jsxs("div",{className:"flex items-center gap-3 pl-6",children:[e.jsx(I,{className:"block h-3 w-4 group-hover:hidden"}),e.jsx(T,{className:"hidden h-3 w-4 group-hover:block"}),e.jsx("div",{className:"group-hover:text-gradient text-sm text-high",children:"My Gateway"})]}),e.jsx("div",{className:"mt-3 flex flex-col pl-1.5 lg:flex-row",children:m.map(([i,u],a)=>e.jsx(V,{label:i,value:`${u}`},a))})]})]})}):e.jsx("div",{className:"relative h-[7.5rem] w-full justify-center overflow-hidden rounded-xl bg-grey-800 ",children:e.jsx("div",{className:"h-full content-center text-center text-sm text-low",children:"Loading gateway information..."})}),n&&e.jsx(y,{onClose:()=>d(!1)}),p&&e.jsx(A,{onClose:()=>c(!1)})]})},o=G(),Y=()=>{const r=S(t=>t.ticker),{isLoading:l,data:n}=k(),[d,p]=s.useState([]),c=w();s.useEffect(()=>{const t=Object.entries(n??{}).reduce((i,[u,a])=>{const j=a.stats.passedEpochCount,f=a.stats.totalEpochCount;return[...i,{label:a.settings.label,domain:a.settings.fqdn,owner:u,start:new Date(a.startTimestamp),totalDelegatedStake:new h(a.totalDelegatedStake).toARIO().valueOf(),operatorStake:new h(a.operatorStake).toARIO().valueOf(),totalStake:new h(a.totalDelegatedStake+a.operatorStake).toARIO().valueOf(),status:a.status,endTimeStamp:a.endTimestamp,performance:f>0?j/f:-1,passedEpochCount:j,totalEpochCount:f,streak:a.status=="leaving"?Number.NEGATIVE_INFINITY:a.stats.failedConsecutiveEpochs>0?-a.stats.failedConsecutiveEpochs:a.stats.passedConsecutiveEpochs}]},[]);p(t)},[n]);const m=s.useMemo(()=>[o.accessor("label",{id:"label",header:"Label",sortDescFirst:!1}),o.accessor("domain",{id:"domain",header:"Domain",sortDescFirst:!1,cell:({row:t})=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("a",{href:`https://${t.getValue("domain")}`,target:"_blank",rel:"noreferrer",onClick:i=>{i.stopPropagation()},className:"text-gradient",children:t.getValue("domain")}),e.jsx(C,{textToCopy:t.getValue("domain")})]})}),o.accessor("owner",{id:"owner",header:"Address",sortDescFirst:!1,cell:({row:t})=>e.jsx(_,{address:t.getValue("owner")})}),o.accessor("start",{id:"start",header:"Join Date",sortDescFirst:!0,cell:({row:t})=>b(t.original.start)}),o.accessor("totalStake",{id:"totalStake",header:`Total Stake (${r})`,sortDescFirst:!0,cell:({row:t})=>e.jsx(g,{message:e.jsxs("div",{children:[e.jsxs("div",{children:["Operator Stake: ",v(t.original.operatorStake)," ",r]}),e.jsxs("div",{className:"mt-1",children:["Delegated Stake:"," ",v(t.original.totalDelegatedStake)," ",r]})]}),children:v(t.getValue("totalStake"))})}),o.accessor("status",{id:"status",header:"Status",sortDescFirst:!1,cell:({row:t})=>t.original.status=="leaving"?e.jsx(g,{message:e.jsx("div",{children:e.jsxs("div",{children:["Final Withdrawal:"," ",b(new Date(t.original.endTimeStamp))]})}),children:e.jsx("div",{className:"text-red-500",children:"leaving"})}):t.original.status}),o.accessor("performance",{id:"performance",header:"Performance",sortDescFirst:!0,cell:({row:t})=>t.original.performance<0?"N/A":e.jsx(g,{message:e.jsxs("div",{children:[e.jsxs("div",{children:["Passed Epochs: ",t.original.passedEpochCount]}),e.jsxs("div",{children:["Total Epochs: ",t.original.totalEpochCount]})]}),children:`${(t.original.performance*100).toFixed(2)}%`})}),o.accessor("streak",{id:"streak",header:"Streak",sortDescFirst:!0,cell:({row:t})=>e.jsx("div",{className:"pr-6",children:e.jsx(E,{streak:t.original.streak})})})],[r]);return e.jsxs("div",{className:"flex h-full max-w-full flex-col",children:[e.jsxs("div",{className:"mb-6 flex shrink-0 flex-col gap-6",children:[e.jsx(D,{}),e.jsx(R,{})]}),e.jsx("div",{className:"flex-1 overflow-hidden",children:e.jsx("div",{className:"h-full overflow-y-auto",children:e.jsx("div",{className:"pt-0",children:e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex w-full items-center rounded-t-xl border border-grey-600 bg-containerL3 py-2 pl-6 pr-[0.8125rem]",children:[e.jsx("div",{className:"grow text-sm text-mid",children:"Gateways"}),e.jsx(L,{tableId:"gateways",columns:m})]}),e.jsx(F,{columns:m,data:d,defaultSortingState:{id:"totalStake",desc:!0},isLoading:l,noDataFoundText:"Unable to fetch gateways.",onRowClick:t=>{c(`/gateways/${t.owner}`)},tableId:"gateways"})]})})})})]})};export{Y as default};
//# sourceMappingURL=index-CQE1seX_.js.map
